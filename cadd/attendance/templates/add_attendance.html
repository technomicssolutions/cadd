{% extends 'base.html' %}

{% block title %}Attendance{% endblock title %}
{% block body_id %}attendance{% endblock %}

{% block controller %}
	ng-controller="AttendanceController" ng-init="init('{{csrf_token}}')"
{% endblock controller %}

{% block content %}
	
	<div class="attendance_form_container">
		<form name="attendance_entry" method="post">
			<div class="form_contents_attendance">
				<div class="section_1_attendance">
					<div class="add_attendance_row">
						<label class="add_attendance_label">Select Batch</label>				  <select ng-model="batch_id" >
							<option value="">Select</option>
							<option ng-repeat="batch in batches" value="[[batch.id]]" ng-click="get_batch_details(batch)">[[batch.name]]</option>
						</select>					
					</div>
					<div class="display_date">
						<label class="add_attendance_label">Date: {{current_date}}</label>
					</div>
					<div class="display_details">
						<label class="add_attendance_label"><b>P</b> - Present <b>A</b> - Absent</label>
					</div>
				</div>
				<div class="clear"></div>
				<div class="section_1_attendance" ng-show="is_edit">
					<table border="0" class="table table-striped" cellpadding="0" cellspacing="0" ng-show="students.length > 0">
						<tr>
							<th>Roll No</th>
							<th>Name</th>
							<th>Absent/Present</th>
						</tr>
						<tr ng-repeat="student in students">
							<td>[[student.roll_number ]]</td>
							<td>[[student.name]]</td>
							<td><input type="checkbox" ng-model="student.is_presented"></td>
						</tr>			                        
					</table>
				</div>
				<div class="section_1_attendance" ng-hide="is_edit">
					<table border="0" class="table table-striped" cellpadding="0" cellspacing="0" ng-show="students.length > 0">
						<tr>
							<th>Roll No</th>
							<th>Name</th>
							<th>Absent/Present</th>
						</tr>
						<tr ng-repeat="student in students">
							<td>[[ student.roll_number ]]</td>
							<td>[[student.name]]</td>
							<td>[[ student.status ]]</td>
						</tr>			                        
					</table>
				</div>	
			</div>
			<div  align="Center">
				<div class="buttons" ng-show="show_buttons">
					<p class="error_message"> [[validation_error]] </p>
					{% if user.is_superuser %}
						<input type="button" value="Submit" ng-click="save_attendance();" class="btn btn-info">
						<input type="button" value="Edit" ng-click="edit_attendance();" class="btn btn-info">
					{% endif %}
					<a href="{% url 'add_attendance' %}"><input type="button" value="Cancel" class="btn btn-info"></a>
				</div>
			</div>			
		</form>
		<div class="clear"></div>
	</div>


{% endblock content %}