{% extends 'base.html' %}
{% block title %}Fees Payment{% endblock title %}
{% block body_id %}fees_payment{% endblock %}

{% block controller %}
	ng-controller="FeesPaymentController" ng-init="init('{{csrf_token}}')"
{% endblock controller %}
{% block content %}
	
	<div id="main-title">
		<div class="alert alert-info" align="Center"><h4>Fees Payment</h4></div>
	</div>
	<div class="form_container">
		<form class="" name="payment" method="post" action="">
			{% csrf_token %}
			
			<div class="control">
				<label> Course</label> 
				<select name="course" ng-model="course" ng-change="get_batch()">
					<option value="select">Select</option>
					<option ng-repeat="course in courses" value="[[course.id]]" >[[course.course]]
					</option>
				</select>
			</div>
			<div class"error_message">
				<p class='error_message'>[[no_batch_error]]</p>
			</div>
			<div class="control">
				<label> Batch</label>
				<select name="batch" ng-model="batch" ng-change="get_student()">
					<option value="select">Select</option>
					<option ng-repeat="batch in batches" value="[[batch.id]]" >[[batch.name]]
					</option>
				</select>
			</div>
			<div class"error_message">
				<p class='error_message'>[[no_student_error]]</p>
			</div>
			<div class="control">
				<label> Student</label>
				<select name="student" ng-model="payment_installment.student" ng-change="get_fees_head()">
					<option value="select">Select</option>
					<option ng-repeat="student in students" value="[[student.id]]" ng-selected="">[[student.student]]
					</option>
				</select>
			</div>
			<div class"error_message">
				<p class='error_message'>[[no_head_error]]</p>
			</div>
			<div class="control">
				<label> Fees Head</label>  
				<select name="head" ng-model="head">
					<option value="">Select</option>
					<option ng-repeat="head in heads" value="[[head.id]]" ng-click="get_installment(head)">[[head.head]]
					</option>
				</select>
			</div>
			<div class"error_message">
				<p class='error_message'>[[no_installment_error]]</p>
			</div>
			<div class="control">
				<label> Installment </label>  
				<select name="installment" ng-model="installment">
					<option value="">Select</option>
					<option ng-repeat="installment in installments" value="[[installment.id]]" ng-click="get_fees(installment)">[[installment.name]]
					</option>
				</select>
			</div>
			<div class="control">
				<label>Fees Amount</label>
				<input type="text" name="amount" id="fee_amount" ng-model="payment_installment.amount"  readonly/> 
			</div>
			<div class="control">
				<label>Due Date</label>
				<input type="text" name="date" id="due_date" ng-model="payment_installment.due_date" readonly/> 
			</div>
			<div class="control">
				<label>Fine</label>
				<input type="text" name="fine" id="fine_amount" ng-model="payment_installment.fine" readonly /> 
			</div>
			<div class="control">
				<label>Paid Date</label>
				<input type="text" name="paid_date" id="paid_date" value="{{current_date}}" onSelect="calculate_total_amount()"/> 
			</div>
			<div class="control">
				<label>Paid Installment Amount</label>
				<input type="text" name="paid_amount" ng-model="payment_installment.paid_installment_amount" readonly/> 
			</div>
			<div class="control">
				<label>Balance Amount</label>
				<input type="text" name="paid_amount" id="balance" ng-model="payment_installment.balance" readonly/> 
			</div>
			<div class="control">
				<label>Total amount to pay</label>
				<input type="text" name="total_amount" id="total_fee_amount" ng-model="payment_installment.total_amount" readonly/> 
			</div>
			<div class="control">
				<label>Paid Amount</label>
				<input type="text" name="paid_amount" ng-model="payment_installment.paid_amount"/> 
			</div>
			<div  align="Center">
				<div class="buttons">
					<p class="error_message"> [[validation_error]] </p>
					<input type="button" class="btn btn-info" value="Cancel" onClick="document.location.href = '/'">
					<input type="submit" value="Submit" ng-click="save_fees_payment()" class="btn btn-info">
				</div>
			</div>
		</form>
	</div>	

{% endblock content %}